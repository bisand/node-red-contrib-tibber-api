<!-- <script type="text/javascript" src="tools.js"></script> -->
<script type="text/javascript">
  var urlFieldValidator = function(value) {
    var feedUrl = $("#node-config-input-feedUrl").val();
    var queryUrl = $("#node-config-input-queryUrl").val();
    return urlValidator(feedUrl ? feedUrl : queryUrl) || urlValidator(value);
  };

  RED.nodes.registerType("tibber-api-endpoint", {
    category: "config",
    defaults: {
      feedUrl: {
        value: "wss://api.tibber.com/v1-beta/gql/subscriptions",
        required: true,
        validate: urlFieldValidator
      },
      queryUrl: {
        value: "https://api.tibber.com/v1-beta/gql",
        required: true,
        validate: urlFieldValidator
      },
      apiKey: {
        value: "",
        required: true
      }
    },
    label: function() {
      return this.apiKey;
    }
  });
</script>

<script type="text/x-red" data-template-name="tibber-api-endpoint">
  <div class="form-row">
      <label for="node-config-input-feedUrl"><i class="icon-bookmark"></i> Feed url</label>
      <input type="text" id="node-config-input-feedUrl">
  </div>
  <div class="form-row">
      <label for="node-config-input-queryUrl"><i class="icon-bookmark"></i> Query url</label>
      <input type="text" id="node-config-input-queryUrl">
  </div>
  <div class="form-row">
    <label for="node-config-input-apiKey"><i class="icon-bookmark"></i> API key</label>
    <input type="text" id="node-config-input-apiKey">
  </div>
</script>
